<html>
<head>
  <title>Phylo Example</title>
  <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel=stylesheet href=prot-style.css>
  <link rel="stylesheet" type="text/css" href="bootstrap-slider.min.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <!-- d3 library for data visualization and animation -->
  <script type="text/javascript" src="https://d3js.org/d3.v4.min.js"></script>
  <script src="https://d3js.org/d3-selection.v1.min.js"></script>

  <!-- jstat library for probability distributions -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jstat@latest/dist/jstat.min.js"></script>

  <!-- phyleaux library for phylogenetic objects and functions -->
  <script type="text/javascript" src="https://jembrown.github.io/phyleaux.js"></script>

  <script src=prot-script.js></script>

</head>
<body>
  <div class='title'>
    <h1 style="text-align: center;">Coalescent Histories In a Population</h1>
  </div>
<div class="container-fluid">
  <div class="container">
  <div class="row">
    <div class="col">
      <form id="foo" style="padding: 10px">
  <div class="form-group">
    <input id="ex8" class="form-control" data-slider-id='ex1Slider' type="text" data-slider-min="0" data-slider-max="20" data-slider-step="1" data-slider-value="14"/>
<input id="ex9" class="form-control" data-slider-id='ex1Slider' type="text" data-slider-min="0" data-slider-max="20" data-slider-step="1" data-slider-value="14"/>
<input id="ex10" class="form-control" data-slider-id='ex1Slider' type="text" data-slider-min="0" data-slider-max="20" data-slider-step="1" data-slider-value="14"/>
  </div>
  <div class="form-group">
    <label for="exampleInputEmail1">Population Size</label>
    <input type="number" class="form-control" id="popSize" aria-describedby="emailHelp" placeholder="Population Size" value=10>
  </div>
  <div class="form-group">
    <label for="exampleInputPassword1">Sample Size</label>
    <input type="number" class="form-control" id="sampleSize" placeholder="Sample Size" value=5>
    <small id="emailHelp" class="form-text text-muted">Make sure population size is greater than sample size.</small>
  </div>
  <div class="form-group">
    <label for="exampleInputPassword1">Number of Generations</label>
    <input type="number" class="form-control" id="numGenerations" placeholder="Number of Generations" value=20>
  </div>
  <button type="submit" class="btn btn-primary">Draw</button>
</form>
    </div>
    <div class="col">
      <span id="visualization">
    </div>
  </div>
</div>
<script type="text/javascript" src="bootstrap-slider.min.js"></script>

        <script>

          const slider1 = new Slider("#ex8", {
            tooltip: 'always'
          });
          const slider2 = new Slider("#ex9", {
            tooltip: 'always'
          });
          const slider3 = new Slider("#ex10", {
            tooltip: 'always'
          });
        function drawCoalescentTree() {
        // Setting plotting defaults
        var svgWidth = 0.5 * window.innerWidth;
        var svgHeight = 0.85 * window.innerHeight;
        var padding = 10;

        const popSize = parseInt(document.getElementById("popSize").value);
        const nGens = parseInt(document.getElementById("numGenerations").value);
        const sampleSize = parseInt(document.getElementById("sampleSize").value);

        if (sampleSize > popSize) {
          alert("Sample size cannot be greater than the population size.");
          return;
        }

        d3.selectAll("svg").remove();

        var history = new coalescentHistory(popSize, nGens, sampleSize);

        history.sampleHistory();

        history.drawSortedHistory(svgWidth, svgHeight, padding, "#visualization");
      }

      window.onload = event => {
        drawCoalescentTree();
      };

      const f = document.getElementById("foo");
      f.addEventListener("submit", event => {
        event.preventDefault();
        drawCoalescentTree();
      });
        </script>
        </span>
      </div>
    </div>
</div>
  </body>
  </html>
